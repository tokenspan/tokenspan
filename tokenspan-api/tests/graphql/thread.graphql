fragment ownerFields on User {
  id
  createdAt
  email
  role
  updatedAt
  username
}

fragment messageFields on Message {
  id
  threadVersionId
  ownerId
  raw
  content
  role
  createdAt
  updatedAt
}

fragment parameterFields on Parameter {
  id
  name
  temperature
  maxTokens
  stopSequences
  topP
  frequencyPenalty
  presencePenalty
  extra
  modelId
  threadVersionId
  createdAt
  updatedAt
}

fragment threadVersionFields on ThreadVersion {
  id
  semver
  version
  releaseNote
  description
  document
  status
  threadId
  ownerId
  createdAt
  updatedAt
  parameters {
    ...parameterFields
  }
  messages {
    ...messageFields
  }
}

mutation CreateThreadMutation($input: ThreadCreateInput!) {
  createThread(input: $input) {
    id
    name
    slug
    ownerId
    createdAt
    updatedAt
    version {
      ...threadVersionFields
    }
    owner {
      ...ownerFields
    }
  }
}

mutation UpdateThreadMutation($updateThreadId: UUID!, $input: ThreadUpdateInput!) {
  updateThread(id: $updateThreadId, input: $input) {
    id
    name
  }
}

query GetThreadsQuery {
  threads {
    pageInfo {
      hasPreviousPage
      hasNextPage
      startCursor
      endCursor
    }
    nodes {
      id
      name
      slug
      ownerId
      createdAt
      updatedAt
      version {
        ...threadVersionFields
      }
      owner {
        ...ownerFields
      }
    }
    totalNodes
  }
}

query GetThreadMutation($threadId: UUID!) {
  thread(id: $threadId) {
    id
    name
    slug
    ownerId
    createdAt
    updatedAt
    version {
      ...threadVersionFields
    }
    owner {
      ...ownerFields
    }
  }
}

mutation DeleteThreadMutation($deleteThreadId: UUID!) {
  deleteThread(id: $deleteThreadId) {
    id
    name
  }
}